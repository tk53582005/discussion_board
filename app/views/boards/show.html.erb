<h1><%= @board.title %></h1>

<p><%= @board.description %></p>
<p>作成者: <%= @board.user.email %></p>
<p>作成日: <%= @board.created_at.strftime("%Y年%m月%d日") %></p>

<% if @board.user == current_user %>
  <%= link_to "編集", edit_board_path(@board) %>
  <%= link_to "削除",
              board_path(@board),
              data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" } %>
<% end %>

<hr>

<h2>タスク一覧</h2>
<%= link_to "新しいタスクを作成", new_board_task_path(@board) %>

<% if @board.tasks.any? %>
  <% @board.tasks.order(due_date: :asc).each do |task| %>
    <div>
      <% if task.eyecatch.attached? %>
        <%= image_tag task.eyecatch, style: "max-width: 200px; height: auto;" %>
      <% end %>

      <h3><%= link_to task.title, board_task_path(@board, task) %></h3>
      <p><%= task.content %></p>
      <p>期限: <%= task.due_date.strftime("%Y年%m月%d日") %></p>
      <p>担当者: <%= task.user.email %></p>

      <% if task.user == current_user %>
        <%= link_to "編集", edit_board_task_path(@board, task) %>
        <%= link_to "削除",
                    board_task_path(@board, task),
                    data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" } %>
      <% end %>
    </div>
    <hr>
  <% end %>
<% else %>
  <p>タスクはまだありません</p>
<% end %>

<%= link_to "一覧に戻る", boards_path %>
